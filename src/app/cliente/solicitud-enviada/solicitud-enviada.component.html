<div class="min-h-screen bg-gradient-to-br from-green-50 to-blue-50 dark:from-gray-900 dark:to-gray-800">
    <!-- Header -->
    <div class="sticky top-0 z-50 bg-white/90 dark:bg-gray-900/90 backdrop-blur-md border-b border-gray-200 dark:border-gray-800">
        <div class="max-w-3xl mx-auto px-4 py-4 flex items-center justify-between">
            <h1 class="text-xl font-bold text-gray-900 dark:text-white">Solicitud Enviada</h1>
            <a routerLink="/cliente/dashboard" class="text-primary font-medium text-sm">Ir al inicio</a>
        </div>
    </div>

    <main class="max-w-3xl mx-auto px-4 py-8">
        @if (solicitudData()) {
            <!-- Mensaje de éxito -->
            <div class="text-center mb-8">
                <div class="w-24 h-24 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6 animate-bounce">
                    <span class="material-symbols-outlined text-5xl text-green-600 dark:text-green-400">check_circle</span>
                </div>
                <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">¡Solicitud Enviada!</h2>
                <p class="text-gray-500 dark:text-gray-400">Tu solicitud ha sido enviada al proveedor. Recibirás una respuesta pronto.</p>
            </div>

            <!-- Contador de 24 horas -->
            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 mb-6">
                <div class="text-center">
                    <p class="text-sm text-gray-500 dark:text-gray-400 mb-4">
                        <span class="material-symbols-outlined text-sm align-middle mr-1">timer</span>
                        El proveedor tiene un plazo para responder de:
                    </p>
                    
                    @if (!tiempoAgotado()) {
                        <div class="flex justify-center gap-4 mb-4">
                            <!-- Horas -->
                            <div class="bg-primary/10 dark:bg-primary/20 rounded-xl p-4 min-w-[80px]">
                                <p class="text-4xl font-extrabold text-primary">{{ horasRestantes().toString().padStart(2, '0') }}</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider">Horas</p>
                            </div>
                            <div class="text-4xl font-bold text-gray-300 dark:text-gray-600 self-center">:</div>
                            <!-- Minutos -->
                            <div class="bg-primary/10 dark:bg-primary/20 rounded-xl p-4 min-w-[80px]">
                                <p class="text-4xl font-extrabold text-primary">{{ minutosRestantes().toString().padStart(2, '0') }}</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider">Minutos</p>
                            </div>
                            <div class="text-4xl font-bold text-gray-300 dark:text-gray-600 self-center">:</div>
                            <!-- Segundos -->
                            <div class="bg-gray-100 dark:bg-gray-700 rounded-xl p-4 min-w-[80px]">
                                <p class="text-4xl font-extrabold text-gray-600 dark:text-gray-300">{{ segundosRestantes().toString().padStart(2, '0') }}</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider">Segundos</p>
                            </div>
                        </div>
                        <p class="text-sm text-gray-500 dark:text-gray-400">
                            Si el proveedor no responde en este tiempo, podrás cancelar la solicitud sin cargo.
                        </p>
                    } @else {
                        <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6">
                            <span class="material-symbols-outlined text-4xl text-red-500 mb-2">schedule_off</span>
                            <p class="text-red-600 dark:text-red-400 font-semibold">El tiempo de respuesta ha expirado</p>
                            <p class="text-sm text-red-500 dark:text-red-400 mt-1">Puedes cancelar esta solicitud o contactar soporte.</p>
                        </div>
                    }
                </div>
            </div>

            <!-- Información del evento -->
            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 mb-6">
                <h3 class="font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2">
                    <span class="material-symbols-outlined text-primary">celebration</span>
                    Detalles del Evento
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <p class="text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider">Evento</p>
                        <p class="font-semibold text-gray-900 dark:text-white">{{ solicitudData().evento.titulo_evento }}</p>
                    </div>
                    <div>
                        <p class="text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider">Fecha y Hora</p>
                        <p class="font-semibold text-gray-900 dark:text-white">{{ solicitudData().evento.fecha_servicio }} - {{ solicitudData().evento.hora_servicio }}</p>
                    </div>
                    <div>
                        <p class="text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider">Invitados</p>
                        <p class="font-semibold text-gray-900 dark:text-white">{{ solicitudData().evento.invitados }} personas</p>
                    </div>
                    <div>
                        <p class="text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider">Ubicación</p>
                        <p class="font-semibold text-gray-900 dark:text-white">{{ solicitudData().evento.ubicacion }}</p>
                    </div>
                </div>
            </div>

            <!-- Información del proveedor -->
            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 mb-6">
                <h3 class="font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2">
                    <span class="material-symbols-outlined text-primary">store</span>
                    Proveedor Solicitado
                </h3>
                <div class="flex items-center gap-4">
                    <div class="w-16 h-16 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden flex-shrink-0">
                        <img [src]="solicitudData().proveedor.imagen" alt="Proveedor" class="w-full h-full object-cover">
                    </div>
                    <div>
                        <p class="font-bold text-lg text-gray-900 dark:text-white">{{ solicitudData().proveedor.nombre }}</p>
                        <p class="text-sm text-gray-500 dark:text-gray-400">{{ solicitudData().proveedor.ubicacion }}</p>
                        <div class="flex items-center gap-1 text-yellow-500 text-sm">
                            <span class="material-symbols-outlined text-[16px] fill-current">star</span>
                            <span class="font-semibold">{{ solicitudData().proveedor.rating }}</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Resumen de paquetes seleccionados -->
            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 mb-6">
                <h3 class="font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2">
                    <span class="material-symbols-outlined text-primary">receipt_long</span>
                    Paquetes Solicitados
                </h3>
                <div class="space-y-4">
                    @for (paquete of solicitudData().paquetesSeleccionados; track paquete.id) {
                        <div class="flex items-center justify-between py-3 border-b border-gray-100 dark:border-gray-700 last:border-0">
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center">
                                    <span class="text-primary font-bold">{{ paquete.cantidad }}</span>
                                </div>
                                <div>
                                    <p class="font-medium text-gray-900 dark:text-white">{{ paquete.nombre }}</p>
                                    <p class="text-sm text-gray-500 dark:text-gray-400">${{ paquete.precioUnitario }} c/u</p>
                                </div>
                            </div>
                            <p class="font-bold text-gray-900 dark:text-white">${{ paquete.subtotal.toLocaleString() }}</p>
                        </div>
                    }
                </div>
                <div class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center">
                    <p class="text-lg font-bold text-gray-900 dark:text-white">Total Estimado</p>
                    <p class="text-2xl font-extrabold text-primary">${{ solicitudData().total.toLocaleString() }} MXN</p>
                </div>
            </div>

            <!-- Próximos pasos -->
            <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-6 mb-8">
                <h3 class="font-bold text-blue-900 dark:text-blue-300 mb-3 flex items-center gap-2">
                    <span class="material-symbols-outlined">info</span>
                    ¿Qué sigue?
                </h3>
                <ol class="space-y-3 text-sm text-blue-800 dark:text-blue-300">
                    <li class="flex items-start gap-2">
                        <span class="w-6 h-6 rounded-full bg-blue-200 dark:bg-blue-800 flex items-center justify-center flex-shrink-0 text-xs font-bold">1</span>
                        <span>El proveedor revisará tu solicitud y te enviará una cotización formal.</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="w-6 h-6 rounded-full bg-blue-200 dark:bg-blue-800 flex items-center justify-center flex-shrink-0 text-xs font-bold">2</span>
                        <span>Recibirás una notificación cuando el proveedor responda.</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="w-6 h-6 rounded-full bg-blue-200 dark:bg-blue-800 flex items-center justify-center flex-shrink-0 text-xs font-bold">3</span>
                        <span>Podrás aceptar, rechazar o negociar la cotización.</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="w-6 h-6 rounded-full bg-blue-200 dark:bg-blue-800 flex items-center justify-center flex-shrink-0 text-xs font-bold">4</span>
                        <span>Una vez aceptada, realizarás el pago del anticipo para confirmar.</span>
                    </li>
                </ol>
            </div>

            <!-- Botones de acción -->
            <div class="flex flex-col sm:flex-row gap-4">
                <button 
                    (click)="verMisSolicitudes()"
                    class="flex-1 bg-primary hover:bg-red-700 text-white font-bold py-4 px-6 rounded-xl shadow-lg flex items-center justify-center gap-2 transition-all">
                    <span class="material-symbols-outlined">list_alt</span>
                    Ver Mis Solicitudes
                </button>
                <button 
                    (click)="crearOtroEvento()"
                    class="flex-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white font-bold py-4 px-6 rounded-xl shadow-lg flex items-center justify-center gap-2 transition-all hover:bg-gray-50 dark:hover:bg-gray-700">
                    <span class="material-symbols-outlined">add</span>
                    Crear Otro Evento
                </button>
            </div>
        } @else {
            <!-- Estado de carga o sin datos -->
            <div class="text-center py-12">
                <span class="material-symbols-outlined text-6xl text-gray-300 dark:text-gray-600 animate-spin">progress_activity</span>
                <p class="mt-4 text-gray-500 dark:text-gray-400">Cargando información...</p>
            </div>
        }
    </main>
</div>
