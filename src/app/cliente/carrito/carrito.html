@if (currentStep() === 1) {
<!-- Top Navbar -->
<header
    class="sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-800 dark:bg-[#211111]/90">
    <div class="max-w-[1440px] mx-auto px-6 lg:px-12 py-4">
        <div class="flex items-center justify-between">
            <!-- Logo -->
            <div class="flex items-center gap-3 cursor-pointer" routerLink="/">
                <div class="size-8 text-primary">
                    <svg fill="none" viewbox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M8.578 8.578C5.528 11.628 3.451 15.514 2.609 19.745C1.768 23.976 2.2 28.361 3.85 32.346C5.501 36.331 8.297 39.738 11.883 42.134C15.47 44.53 19.687 45.81 24 45.81C28.314 45.81 32.53 44.53 36.117 42.134C39.703 39.738 42.499 36.331 44.149 32.346C45.8 28.361 46.232 23.976 45.39 19.745C44.549 15.514 42.472 11.628 39.422 8.578L24 24L8.578 8.578Z"
                            fill="currentColor"></path>
                    </svg>
                </div>
                <span class="text-jet dark:text-white text-xl font-serif font-bold tracking-tight">FestEasy</span>
            </div>
            <!-- Desktop Nav -->
            <nav class="hidden md:flex items-center gap-10">
                <a class="text-sm font-medium text-jet dark:text-gray-200 hover:text-primary transition-colors"
                    href="#">Eventos</a>
                <a class="text-sm font-medium text-jet dark:text-gray-200 hover:text-primary transition-colors"
                    href="#">Proveedores</a>
                <a class="text-sm font-medium text-jet dark:text-gray-200 hover:text-primary transition-colors"
                    href="#">Inspiración</a>
            </nav>
            <!-- Actions -->
            <div class="flex items-center gap-4">
                <button
                    class="hidden sm:flex items-center justify-center size-10 rounded-full bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 transition-colors text-jet dark:text-white">
                    <span class="material-symbols-outlined text-[20px]">search</span>
                </button>
                <button
                    class="flex items-center justify-center size-10 rounded-full bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 transition-colors text-jet dark:text-white relative">
                    <span class="material-symbols-outlined text-[20px]">shopping_cart</span>
                    <span class="absolute top-2 right-2 size-2 bg-primary rounded-full"></span>
                </button>
                <div class="size-8 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden ml-2 cursor-pointer">
                    <img class="w-full h-full object-cover" data-alt="User avatar profile picture"
                        src="https://lh3.googleusercontent.com/aida-public/AB6AXuCqmk37wcXfPURYCeOXfqtI2WBGfTxeByISy6n9u9pRxAeTP6wTzZMC335-eA2_YaSLm9pb8QpYZ2i1_y2_JCKQfmywI5QmIqf58RRCHvichaZjYybDPNZ5NAbOhqCxRSjGf_JSFHfM9c4ZJvenjhr4_YMkYf_TgBXSSHTGGW4Zc04Sb9b2DHDB7iM0kXY7SzH45nd0Dz4evhN21f9yXc_DkXlN7Z75_rMSK8plS2QfxkEptPXKifqCpeQKlI3fW88QUM6VMgIwIyw" />
                </div>
            </div>
        </div>
    </div>
</header>
<!-- Main Content -->
<main
    class="flex-grow w-full max-w-[1440px] mx-auto px-6 lg:px-12 py-12 lg:py-20 bg-background-light dark:bg-background-dark font-display text-text-main">
    <!-- Page Title -->
    <div class="mb-12 lg:mb-16">
        <h1
            class="font-serif text-4xl md:text-5xl lg:text-6xl font-medium text-jet dark:text-white tracking-tight mb-4">
            Mi Carrito
        </h1>
        <p class="text-stone dark:text-gray-400 font-display text-lg max-w-2xl">
            Revisa tus selecciones premium antes de finalizar la experiencia.
        </p>
    </div>
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 xl:gap-20 items-start">
        <!-- Left Column: Cart Items -->
        <div class="lg:col-span-7 xl:col-span-8 flex flex-col gap-8">
            <!-- Group 1 -->
            <div class="flex flex-col gap-4">
                <h2
                    class="text-sm font-bold tracking-widest uppercase text-stone dark:text-gray-500 pl-4 mb-2 flex items-center gap-2">
                    <span class="material-symbols-outlined text-lg">storefront</span>
                    Proveedores Seleccionados
                </h2>

                @for (item of items(); track item.id) {
                <!-- Item 1 -->
                <div
                    class="group bg-white dark:bg-[#2A2A2A] rounded-[24px] p-4 pr-6 sm:p-6 shadow-card hover:shadow-soft transition-all duration-300 border border-transparent hover:border-gray-100 dark:border-gray-800 dark:hover:border-gray-700">
                    <div class="flex flex-col sm:flex-row gap-6">
                        <!-- Thumbnail -->
                        <div class="shrink-0 w-full sm:w-32 h-48 sm:h-32 rounded-xl overflow-hidden relative">
                            <img class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                                [src]="item.imagen" alt="Thumbnail" />
                            <div class="absolute inset-0 bg-black/5 block sm:hidden"></div>
                        </div>
                        <!-- Content -->
                        <div class="flex-1 flex flex-col justify-between py-1">
                            <div>
                                <div class="flex justify-between items-start mb-1">
                                    <h3 class="font-display font-bold text-xl text-jet dark:text-white leading-tight">{{
                                        item.nombre }}</h3>
                                    <button (click)="removeItem(item.id)"
                                        class="text-stone hover:text-primary transition-colors">
                                        <span class="material-symbols-outlined">close</span>
                                    </button>
                                </div>
                                <p class="text-stone dark:text-gray-400 text-sm leading-relaxed mb-4 line-clamp-2">
                                    {{ item.proveedor }}
                                </p>
                            </div>
                            <div class="flex items-end justify-between">
                                <div
                                    class="flex items-center gap-3 bg-glacial dark:bg-black/20 rounded-full px-3 py-1 w-fit">
                                    <button
                                        class="size-8 flex items-center justify-center rounded-full text-jet dark:text-white hover:bg-white dark:hover:bg-gray-700 shadow-sm transition-all active:scale-95 disabled:opacity-50">
                                        <span class="material-symbols-outlined text-sm">remove</span>
                                    </button>
                                    <span class="w-4 text-center font-medium text-jet dark:text-white">{{ item.cantidad
                                        }}</span>
                                    <button
                                        class="size-8 flex items-center justify-center rounded-full text-jet dark:text-white hover:bg-white dark:hover:bg-gray-700 shadow-sm transition-all active:scale-95">
                                        <span class="material-symbols-outlined text-sm">add</span>
                                    </button>
                                </div>
                                <span class="font-bold text-xl text-jet dark:text-white">${{ (item.precio *
                                    item.cantidad).toLocaleString() }}</span>
                            </div>
                        </div>
                    </div>
                </div>
                } @empty {
                <p class="text-center text-gray-500 py-10">Tu carrito está vacío.</p>
                }

            </div>
        </div>

        <!-- Right Column: Sticky Summary -->
        <div class="lg:col-span-5 xl:col-span-4 lg:sticky lg:top-32">
            <div
                class="bg-white dark:bg-[#2A2A2A] rounded-[24px] p-8 shadow-card border border-gray-50 dark:border-gray-700">
                <h2 class="font-serif text-2xl font-semibold mb-8 text-jet dark:text-white">Resumen</h2>
                <div class="space-y-4 mb-8">
                    <div class="flex justify-between items-center text-sm">
                        <span class="text-stone dark:text-gray-400">Subtotal</span>
                        <span class="font-bold text-jet dark:text-white">${{ subtotal.toLocaleString() }}</span>
                    </div>
                    <div class="flex justify-between items-center text-sm">
                        <span class="text-stone dark:text-gray-400 flex items-center gap-1">
                            Tarifa de servicio (5%)
                            <span class="material-symbols-outlined text-[16px] text-gray-300 cursor-help">info</span>
                        </span>
                        <span class="font-bold text-jet dark:text-white">${{ comision.toLocaleString() }}</span>
                    </div>
                    <div class="flex justify-between items-center text-sm">
                        <span class="text-stone dark:text-gray-400">Impuestos (7%)</span>
                        <span class="font-bold text-jet dark:text-white">${{ impuestos.toLocaleString() }}</span>
                    </div>
                </div>
                <div class="border-t border-dashed border-gray-200 dark:border-gray-600 my-6"></div>
                <div class="flex justify-between items-end mb-8">
                    <span class="font-serif text-lg text-jet dark:text-white">Total Final</span>
                    <span class="font-serif text-3xl md:text-4xl font-bold text-primary">${{ total.toLocaleString()
                        }}</span>
                </div>
                <button (click)="proceedToCheckout()" [disabled]="items().length === 0"
                    class="w-full bg-primary hover:bg-red-700 text-white font-display font-bold text-lg py-4 rounded-xl shadow-lg shadow-primary/30 transition-all duration-300 transform hover:-translate-y-1 flex justify-center items-center gap-2 group disabled:opacity-50 disabled:cursor-not-allowed">
                    Proceder al Pago
                    <span
                        class="material-symbols-outlined group-hover:translate-x-1 transition-transform">arrow_forward</span>
                </button>
                <p class="text-center text-xs text-stone dark:text-gray-500 mt-4">
                    Transacción segura y encriptada
                </p>
            </div>
            <!-- Promo Code -->
            <div class="mt-6">
                <button
                    class="w-full bg-transparent border border-gray-200 dark:border-gray-700 text-stone dark:text-gray-400 font-medium py-3 rounded-xl hover:border-primary hover:text-primary transition-colors text-sm flex items-center justify-center gap-2">
                    <span class="material-symbols-outlined text-[20px]">sell</span>
                    ¿Tienes un código promocional?
                </button>
            </div>
        </div>
    </div>
    <!-- Cross Selling Section -->
    <div class="mt-24 lg:mt-32">
        <div class="flex flex-col md:flex-row md:items-end justify-between mb-10 gap-4">
            <div>
                <h2 class="font-serif text-3xl font-medium text-jet dark:text-white mb-2">¿Necesitas algo más?</h2>
                <p class="text-stone dark:text-gray-400">Sugerencias basadas en tu evento en la Ciudad de México</p>
            </div>
            <a class="text-primary font-bold text-sm hover:underline decoration-2 underline-offset-4 flex items-center gap-1"
                href="#">
                Ver todo <span class="material-symbols-outlined text-sm">arrow_forward</span>
            </a>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Suggestion 1 -->
            <div
                class="bg-white dark:bg-[#2A2A2A] rounded-2xl p-3 flex items-center gap-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer group">
                <div class="size-20 rounded-xl overflow-hidden shrink-0">
                    <img class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                        data-alt="Modern wedding photography camera lens and bouquet detail"
                        src="https://lh3.googleusercontent.com/aida-public/AB6AXuCC3v-mQncqM9TFXGEjlTBSrSg5FeHa5swPjGUxvCKNigiqSW7HYJaPCv1AjiUwioiTzyZzZNgshtxlkZpM_LaGJNHK3B23AI1nKqXMmWFlNU-qbQ8_UzxtKB7UFxp9QYrhgZPKRPChq4w06hJHPb34UOW2e9MyCowypeZdDNxmVE8qdSRuIyJqPiRndwlcuZfIwgELP4sCBnvh385QsMn5lZVl1ns-bCB2SL8dr7l0C1UwFMiagikv9kDf2zqAQ9vDDPBmd2Lqb2A" />
                </div>
                <div class="flex-1 min-w-0">
                    <h4 class="font-bold text-jet dark:text-white truncate">Lente Mágico Studio</h4>
                    <div class="flex items-center gap-1 text-xs text-stone dark:text-gray-400 mt-1">
                        <span>Fotografía</span>
                        <span>•</span>
                        <span>2.5km</span>
                    </div>
                    <div class="flex items-center gap-1 mt-2">
                        <div class="flex text-primary">
                            <span class="material-symbols-outlined text-[16px] fill-current">star</span>
                            <span class="material-symbols-outlined text-[16px] fill-current">star</span>
                            <span class="material-symbols-outlined text-[16px] fill-current">star</span>
                            <span class="material-symbols-outlined text-[16px] fill-current">star</span>
                            <span class="material-symbols-outlined text-[16px] fill-current">star</span>
                        </div>
                    </div>
                </div>
                <button
                    class="mr-2 size-8 rounded-full bg-gray-50 dark:bg-gray-700 flex items-center justify-center text-jet dark:text-white hover:bg-primary hover:text-white transition-colors">
                    <span class="material-symbols-outlined text-[20px]">add</span>
                </button>
            </div>
            <!-- Suggestion 2 -->
            <div
                class="bg-white dark:bg-[#2A2A2A] rounded-2xl p-3 flex items-center gap-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer group">
                <div class="size-20 rounded-xl overflow-hidden shrink-0">
                    <img class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                        data-alt="Elegant floral arrangement centerpiece with roses"
                        src="https://lh3.googleusercontent.com/aida-public/AB6AXuCfpEjc3czdESZIV1Rxy1Kxynqio8Ey48e1FHk697EQvg0IlVBypkBfo293I3-B3Ch5aD9igvpCeeoJTwDgSmYvJ14SGYHeFfDg0CMujU6dvDVloTQbh_w3sLsfPxD4SN1r_5-AVgUxh2xpyG-Fg76y9_hcjgOAq4DwJw_oxqXw6n2-4_Ii4G-33sHHha1GIk_3hnMdiFFNqNhJUvhTM0zeQyncFSGHQNGvHds46pu1Zg8PzKVuaSMHV325CS2-EDv78Caq9dngyLc" />
                </div>
                <div class="flex-1 min-w-0">
                    <h4 class="font-bold text-jet dark:text-white truncate">Florería Bella</h4>
                    <div class="flex items-center gap-1 text-xs text-stone dark:text-gray-400 mt-1">
                        <span>Decoración</span>
                        <span>•</span>
                        <span>1.2km</span>
                    </div>
                    <div class="flex items-center gap-1 mt-2">
                        <div class="flex text-primary">
                            <span class="material-symbols-outlined text-[16px] fill-current">star</span>
                            <span class="material-symbols-outlined text-[16px] fill-current">star</span>
                            <span class="material-symbols-outlined text-[16px] fill-current">star</span>
                            <span class="material-symbols-outlined text-[16px] fill-current">star</span>
                            <span class="material-symbols-outlined text-[16px] fill-current">star</span>
                        </div>
                    </div>
                </div>
                <button
                    class="mr-2 size-8 rounded-full bg-gray-50 dark:bg-gray-700 flex items-center justify-center text-jet dark:text-white hover:bg-primary hover:text-white transition-colors">
                    <span class="material-symbols-outlined text-[20px]">add</span>
                </button>
            </div>
            <!-- Suggestion 3 -->
            <div
                class="bg-white dark:bg-[#2A2A2A] rounded-2xl p-3 flex items-center gap-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer group">
                <div class="size-20 rounded-xl overflow-hidden shrink-0">
                    <img class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                        data-alt="Security guard in suit with earpiece standing at event entrance"
                        src="https://lh3.googleusercontent.com/aida-public/AB6AXuAmZSDtjHd_q0dYGExEJJESC_PiHBvlWMVAfU4Z2b6L1RS7dWJ155ZstszyIoh7yc6UfsHBh-zRredkxGtlJUajZRdv7y134nOv0fMqvLqRWcMoVWmWpyv5bQGqgxk_g0txuKehkU0hXZhdUapvak_6Xr095oUJ5gznqXQWvC2SILojHzHFB7L5gFh56ZkpF8Dvy04-RGFp1XQgtJQIeabNew1nM-MwjkRey_78tFN0wYWyaKs84utBHkhRieGWU4uLSvz35ZTX14s" />
                </div>
                <div class="flex-1 min-w-0">
                    <h4 class="font-bold text-jet dark:text-white truncate">SafeGuard Eventos</h4>
                    <div class="flex items-center gap-1 text-xs text-stone dark:text-gray-400 mt-1">
                        <span>Seguridad</span>
                        <span>•</span>
                        <span>4.0km</span>
                    </div>
                    <div class="flex items-center gap-1 mt-2">
                        <div class="flex text-primary">
                            <span class="material-symbols-outlined text-[16px] fill-current">star</span>
                            <span class="material-symbols-outlined text-[16px] fill-current">star</span>
                            <span class="material-symbols-outlined text-[16px] fill-current">star</span>
                            <span class="material-symbols-outlined text-[16px] fill-current">star</span>
                            <span class="material-symbols-outlined text-[16px] fill-current">star_half</span>
                        </div>
                    </div>
                </div>
                <button
                    class="mr-2 size-8 rounded-full bg-gray-50 dark:bg-gray-700 flex items-center justify-center text-jet dark:text-white hover:bg-primary hover:text-white transition-colors">
                    <span class="material-symbols-outlined text-[20px]">add</span>
                </button>
            </div>
        </div>
    </div>
</main>
} @else {
<!-- CHECKOUT VIEW -->
<div
    class="min-h-screen flex flex-col bg-background-light dark:bg-background-dark text-text-main dark:text-white font-display antialiased">
    <header
        class="w-full bg-surface-light dark:bg-surface-dark border-b border-border-color/50 dark:border-gray-800 sticky top-0 z-40 bg-white dark:bg-[#211111]/90 backdrop-blur-md">
        <div class="max-w-[1280px] mx-auto px-4 sm:px-6 lg:px-8 h-20 flex items-center justify-between">
            <div class="flex items-center gap-2 cursor-pointer" routerLink="/">
                <div
                    class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center text-white font-bold text-xl">
                    F</div>
                <span class="font-bold text-xl tracking-tight">FestEasy</span>
            </div>
            <nav class="hidden md:flex flex-col items-center justify-center flex-1 mx-8 relative group">
                <div class="flex items-center gap-4 text-sm font-semibold tracking-wide">
                    <button (click)="currentStep.set(1)"
                        class="text-text-sub dark:text-gray-400 hover:text-primary transition-colors">Carrito</button>
                    <span class="material-symbols-outlined text-[16px] text-gray-300">chevron_right</span>
                    <span class="text-primary">Pago</span>
                    <span class="material-symbols-outlined text-[16px] text-gray-300">chevron_right</span>
                    <span class="text-gray-300">Confirmación</span>
                </div>
                <div
                    class="absolute -bottom-[26px] w-full max-w-[200px] h-[2px] bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden">
                    <div
                        class="w-2/3 h-full bg-primary rounded-full shadow-[0_0_10px_rgba(224,29,37,0.5)] absolute left-1/3">
                    </div>
                </div>
            </nav>
            <div class="flex items-center gap-2 text-text-sub dark:text-gray-400">
                <span class="material-symbols-outlined text-[20px]">lock</span>
                <span class="text-sm font-medium hidden sm:block">Pago Seguro</span>
            </div>
        </div>
    </header>
    <main class="flex-grow w-full max-w-[1280px] mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-12">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 xl:gap-16 items-start">
            <div class="lg:col-span-7 xl:col-span-8 flex flex-col gap-10">
                <section
                    class="bg-surface-light dark:bg-surface-dark p-6 sm:p-8 rounded-2xl shadow-soft border border-transparent dark:border-gray-800 bg-white dark:bg-[#2A2A2A]">
                    <div class="flex items-center gap-3 mb-8">
                        <div class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary">
                            <span class="material-symbols-outlined">event_note</span>
                        </div>
                        <h2 class="text-2xl font-bold tracking-tight text-text-main dark:text-white">Detalles del Evento
                        </h2>
                    </div>
                    <div class="flex flex-col gap-6">
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                            <label class="flex flex-col group">
                                <span class="text-sm font-semibold text-text-main dark:text-gray-200 mb-2 pl-1">Fecha
                                    del Evento</span>
                                <div class="relative">
                                    <input
                                        class="w-full bg-background-light dark:bg-black/20 border border-border-color dark:border-gray-700 rounded-xl h-14 px-4 pl-12 text-base outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all placeholder:text-gray-400 dark:text-white"
                                        placeholder="dd/mm/aaaa" type="text" [value]="requestInfo().fecha" readonly />
                                    <span
                                        class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-primary transition-colors">calendar_today</span>
                                </div>
                            </label>
                            <label class="flex flex-col group">
                                <span class="text-sm font-semibold text-text-main dark:text-gray-200 mb-2 pl-1">Hora de
                                    Inicio</span>
                                <div class="relative">
                                    <input
                                        class="w-full bg-background-light dark:bg-black/20 border border-border-color dark:border-gray-700 rounded-xl h-14 px-4 pl-12 text-base outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all placeholder:text-gray-400 dark:text-white"
                                        placeholder="--:--" type="text" [value]="requestInfo().hora" readonly />
                                    <span
                                        class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-primary transition-colors">schedule</span>
                                </div>
                            </label>
                        </div>
                        <label class="flex flex-col group">
                            <span class="text-sm font-semibold text-text-main dark:text-gray-200 mb-2 pl-1">Dirección
                                del Evento</span>
                            <div class="relative">
                                <input
                                    class="w-full bg-background-light dark:bg-black/20 border border-border-color dark:border-gray-700 rounded-xl h-14 px-4 pl-12 text-base outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all placeholder:text-gray-400 dark:text-white"
                                    placeholder="Buscar calle, número, colonia..." type="text"
                                    [value]="requestInfo().direccion" readonly />
                                <span
                                    class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-primary transition-colors">location_on</span>
                            </div>
                        </label>
                        <div
                            class="relative w-full h-48 rounded-xl overflow-hidden border border-border-color dark:border-gray-700 group cursor-pointer">
                            <div class="absolute inset-0 bg-cover bg-center grayscale opacity-80 group-hover:grayscale-0 group-hover:scale-105 transition-all duration-500"
                                data-alt="Map view of Mexico City streets" data-location="Mexico City"
                                style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuCZ2JKp2e8hSOoqQpcYm58Es1aZwwAd_rBrTs3Cu5bEhZJcoheXjrn-FGOUy2ClDLPVjInCaECY0IzMiKDCkMUuU1urPQ1_5u-_BGkGr1ZPacycNVhus-xhazlI4mIE8A9G51oYy2_AQudrygla4g3cBmLISsR9PynSJUriWlvlA-IKHUqBaN4CTxRTIFoVLxwmzSIgtQo673j48D7bdr50ilR-c0k7qknW7HaMbKOYVVgNXe_WrThT_8bSWACZGOIPdeD3G8fgy3w');">
                            </div>
                            <div class="absolute inset-0 bg-black/5 dark:bg-black/40"></div>
                            <div
                                class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center">
                                <div
                                    class="w-12 h-12 bg-primary text-white rounded-full flex items-center justify-center shadow-lg animate-bounce">
                                    <span class="material-symbols-outlined text-[28px]">push_pin</span>
                                </div>
                                <span
                                    class="mt-2 bg-white dark:bg-gray-800 px-3 py-1 rounded-full text-xs font-bold shadow-md text-text-main dark:text-white">Ubicación
                                    Exacta</span>
                            </div>
                        </div>
                    </div>
                </section>
                <section
                    class="bg-surface-light dark:bg-surface-dark p-6 sm:p-8 rounded-2xl shadow-soft border border-transparent dark:border-gray-800 bg-white dark:bg-[#2A2A2A]">
                    <div class="flex items-center gap-3 mb-8">
                        <div class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary">
                            <span class="material-symbols-outlined">payments</span>
                        </div>
                        <h2 class="text-2xl font-bold tracking-tight text-text-main dark:text-white">Método de Pago</h2>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <label class="cursor-pointer relative">
                            <input checked="" class="peer sr-only" name="payment_method" type="radio" />
                            <div
                                class="h-full flex flex-col items-center justify-center p-6 rounded-xl border-2 border-primary bg-primary/5 dark:bg-primary/10 peer-checked:border-primary peer-checked:bg-primary/5 dark:peer-checked:bg-primary/10 transition-all hover:bg-gray-50 dark:hover:bg-gray-800/50 border-gray-200 dark:border-gray-700">
                                <span class="material-symbols-outlined text-4xl text-primary mb-3">credit_card</span>
                                <span
                                    class="font-bold text-sm text-center text-text-main dark:text-white">Tarjeta</span>
                                <span class="text-xs text-text-sub text-center mt-1">Stripe Secure</span>
                                <div
                                    class="absolute top-3 right-3 w-5 h-5 bg-primary rounded-full flex items-center justify-center peer-checked:opacity-100 opacity-0 transition-opacity">
                                    <span
                                        class="material-symbols-outlined text-white text-[14px] font-bold">check</span>
                                </div>
                            </div>
                        </label>
                        <label class="cursor-pointer relative">
                            <input class="peer sr-only" name="payment_method" type="radio" />
                            <div
                                class="h-full flex flex-col items-center justify-center p-6 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-black/20 peer-checked:border-primary peer-checked:bg-primary/5 dark:peer-checked:bg-primary/10 transition-all hover:bg-gray-50 dark:hover:bg-gray-700">
                                <span
                                    class="material-symbols-outlined text-4xl text-gray-400 peer-checked:text-primary mb-3">account_balance</span>
                                <span
                                    class="font-bold text-sm text-center text-text-main dark:text-white">Transferencia</span>
                                <span class="text-xs text-text-sub text-center mt-1">SPEI</span>
                            </div>
                        </label>
                        <label class="cursor-pointer relative">
                            <input class="peer sr-only" name="payment_method" type="radio" />
                            <div
                                class="h-full flex flex-col items-center justify-center p-6 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-black/20 peer-checked:border-primary peer-checked:bg-primary/5 dark:peer-checked:bg-primary/10 transition-all hover:bg-gray-50 dark:hover:bg-gray-700">
                                <span
                                    class="material-symbols-outlined text-4xl text-gray-400 peer-checked:text-primary mb-3">storefront</span>
                                <span
                                    class="font-bold text-sm text-center text-text-main dark:text-white">Efectivo</span>
                                <span class="text-xs text-text-sub text-center mt-1">Oxxo Pay</span>
                            </div>
                        </label>
                    </div>
                    <div class="border-t border-border-color dark:border-gray-700 pt-6 mt-2 animate-fade-in">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <label class="md:col-span-2">
                                <span class="text-xs font-bold uppercase tracking-wider text-text-sub mb-1 block">Número
                                    de Tarjeta</span>
                                <input
                                    class="w-full bg-background-light dark:bg-black/20 border border-border-color dark:border-gray-700 rounded-lg h-12 px-4 focus:ring-1 focus:ring-primary focus:border-primary outline-none dark:text-white"
                                    placeholder="0000 0000 0000 0000" type="text" />
                            </label>
                            <label>
                                <span
                                    class="text-xs font-bold uppercase tracking-wider text-text-sub mb-1 block">Expiración</span>
                                <input
                                    class="w-full bg-background-light dark:bg-black/20 border border-border-color dark:border-gray-700 rounded-lg h-12 px-4 focus:ring-1 focus:ring-primary focus:border-primary outline-none dark:text-white"
                                    placeholder="MM/AA" type="text" />
                            </label>
                            <label>
                                <span
                                    class="text-xs font-bold uppercase tracking-wider text-text-sub mb-1 block">CVC</span>
                                <div class="relative">
                                    <input
                                        class="w-full bg-background-light dark:bg-black/20 border border-border-color dark:border-gray-700 rounded-lg h-12 px-4 focus:ring-1 focus:ring-primary focus:border-primary outline-none dark:text-white"
                                        placeholder="123" type="text" />
                                    <span
                                        class="material-symbols-outlined absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-lg cursor-help">help</span>
                                </div>
                            </label>
                            <label class="md:col-span-2">
                                <span class="text-xs font-bold uppercase tracking-wider text-text-sub mb-1 block">Nombre
                                    en la Tarjeta</span>
                                <input
                                    class="w-full bg-background-light dark:bg-black/20 border border-border-color dark:border-gray-700 rounded-lg h-12 px-4 focus:ring-1 focus:ring-primary focus:border-primary outline-none dark:text-white"
                                    placeholder="Como aparece en la tarjeta" type="text" />
                            </label>
                        </div>
                    </div>
                </section>
            </div>
            <div class="lg:col-span-5 xl:col-span-4 lg:sticky lg:top-24">
                <div
                    class="bg-surface-light dark:bg-surface-dark rounded-[32px] p-8 shadow-float border border-transparent dark:border-gray-800 relative overflow-hidden z-20 bg-white dark:bg-[#2A2A2A]">
                    <div class="absolute -top-20 -right-20 w-40 h-40 bg-primary/5 rounded-full blur-3xl"></div>
                    <h3 class="text-xl font-bold text-text-main dark:text-white mb-6 relative z-10">Resumen de Compra
                    </h3>
                    <div class="space-y-6 mb-8 relative z-10">

                        @for (item of items(); track item.id) {
                        <div class="flex justify-between items-start group">
                            <div class="pr-2">
                                <p class="font-bold text-text-main dark:text-white text-base">{{ item.proveedor }}</p>
                                <p class="text-sm text-text-sub mt-1 leading-snug">{{ item.nombre }} (x{{ item.cantidad
                                    }})</p>
                            </div>
                            <span class="font-semibold text-text-main dark:text-gray-200 whitespace-nowrap">${{
                                (item.precio * item.cantidad).toLocaleString() }}</span>
                        </div>
                        }

                    </div>
                    <div class="h-px w-full bg-gray-100 dark:bg-gray-700 my-6 relative z-10"></div>
                    <div class="space-y-3 mb-8 relative z-10 text-sm">
                        <div class="flex justify-between text-text-sub dark:text-gray-400">
                            <span>Subtotal</span>
                            <span>${{ subtotal.toLocaleString() }}</span>
                        </div>
                        <div class="flex justify-between text-text-sub dark:text-gray-400">
                            <span>Tarifa de Servicio (5%)</span>
                            <span>${{ comision.toLocaleString() }}</span>
                        </div>
                        <div class="flex justify-between text-text-sub dark:text-gray-400">
                            <span>Impuestos (7%)</span>
                            <span>${{ impuestos.toLocaleString() }}</span>
                        </div>
                    </div>
                    <div class="flex justify-between items-end mb-8 relative z-10">
                        <span class="font-bold text-lg text-text-main dark:text-white mb-1">Total Final</span>
                        <span class="text-4xl font-extrabold text-primary tracking-tight">${{ total.toLocaleString()
                            }}</span>
                    </div>
                    <button (click)="checkout()"
                        class="w-full bg-primary hover:bg-primary-dark text-white font-bold py-4 rounded-2xl shadow-lg shadow-primary/30 transition-all transform active:scale-[0.98] flex items-center justify-center gap-2 group relative z-10">
                        <span>Confirmar Reservación y Pagar</span>
                        <span
                            class="material-symbols-outlined group-hover:translate-x-1 transition-transform">arrow_forward</span>
                    </button>
                    <div class="mt-6 flex items-center justify-center gap-2 opacity-80 relative z-10">
                        <span class="material-symbols-outlined text-green-600 text-[20px]">verified_user</span>
                        <p class="text-xs text-center text-text-sub dark:text-gray-400 leading-tight">
                            Tus pagos están protegidos por <br /><strong
                                class="text-text-main dark:text-gray-300">FestEasy Escrow</strong>
                        </p>
                    </div>
                </div>
                <div
                    class="mt-6 bg-blue-50/50 dark:bg-gray-800 border border-blue-100 dark:border-gray-700 rounded-2xl p-4 flex items-start gap-3 backdrop-blur-sm">
                    <div
                        class="min-w-[24px] h-6 flex items-center justify-center rounded-full bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400">
                        <span class="material-symbols-outlined text-[18px]">info</span>
                    </div>
                    <p class="text-sm text-text-main dark:text-gray-300 font-medium leading-relaxed">
                        Al confirmar, enviaremos tu solicitud a los proveedores. Tienen 24 horas para aceptar.
                    </p>
                </div>
                <p class="text-center text-xs text-gray-400 mt-6 px-4">
                    Al confirmar, aceptas los <a class="underline hover:text-primary" href="#">Términos de Servicio</a>
                    y la <a class="underline hover:text-primary" href="#">Política de Privacidad</a> de FestEasy.
                </p>
            </div>
        </div>
    </main>
</div>
}